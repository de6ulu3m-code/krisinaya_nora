<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£—é—Ç–Ω–∞—è –Ω–æ—Ä–∞</title>
    <style>
        body {
            background-color: #120905;
            color: #f0d0a0;
            font-family: 'Georgia', serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
        }

        /* –í–µ—Ä—Ö–Ω–µ–µ –º–µ–Ω—é */
        .nav-menu {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
        }

        .nav-btn {
            background: #3d2616;
            border: 1px solid #5d4030;
            color: #c0a080;
            padding: 8px 15px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
        }

        /* –û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ */
        .main-card {
            background: #2a180d;
            border: 1px solid #4a2d1a;
            border-radius: 40px;
            padding: 30px;
            width: 320px;
            text-align: center;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }

        .cheese-count { color: #ffcc00; font-size: 20px; margin-bottom: 5px; }
        .rat-name { color: #ffcc00; font-size: 22px; margin-bottom: 15px; font-weight: bold; }

        /* –ò–≥—Ä–æ–≤–∞—è –∑–æ–Ω–∞ */
        .room-view {
            height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        #roomIcon { font-size: 60px; line-height: 1; }
        #ratIcon { font-size: 35px; margin-top: -10px; }

        .description {
            font-style: italic;
            color: #d0b090;
            margin-bottom: 25px;
            line-height: 1.4;
        }

        /* –û—Ä–∞–Ω–∂–µ–≤–∞—è –∫–Ω–æ–ø–∫–∞ */
        .action-btn {
            background: #8b4513;
            border: none;
            color: #f0d0a0;
            padding: 15px;
            width: 100%;
            border-radius: 25px;
            font-size: 18px;
            cursor: pointer;
            transition: 0.2s;
        }

        .action-btn:hover { background: #a0522d; }

        /* –ú–∞–≥–∞–∑–∏–Ω –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ */
        #shop-list {
            display: none;
            text-align: left;
            margin-top: 10px;
        }

        .shop-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #4a2d1a;
        }

        .buy-btn {
            background: #5d4030;
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 8px;
            cursor: pointer;
        }

        .footer-link {
            margin-top: 30px;
            color: #5d4030;
            text-decoration: none;
            font-size: 16px;
        }
    </style>
</head>
<body>

    <div class="nav-menu">
        <button class="nav-btn" onclick="changeRoom('living')">–ì–æ—Å—Ç–∏–Ω–∞—è</button>
        <button class="nav-btn" onclick="changeRoom('kitchen')">–ö—É—Ö–Ω—è</button>
        <button class="nav-btn" onclick="changeRoom('bedroom')">–°–ø–∞–ª—å–Ω—è</button>
        <button class="nav-btn" onclick="changeRoom('basement')">–ü–æ–¥–≤–∞–ª</button>
        <button class="nav-btn" onclick="changeRoom('shop')">üí∞ –õ–∞–≤–∫–∞</button>
    </div>

    <div class="main-card">
        <div class="cheese-count">–°—ã—Ä: <span id="balance">0</span> üßÄ</div>
        <div id="rat-name" class="rat-name">–î—è–¥—é—à–∫–∞ –ü–∏—Å–∫</div>

        <div class="room-view">
            <div id="roomIcon">üî•</div>
            <div id="ratIcon">üêÄ</div>
        </div>

        <div id="roomDesc" class="description">–ó–¥–µ—Å—å —Ç–µ–ø–ª–æ –∏ –ø–∞—Ö–Ω–µ—Ç –¥–µ—Ä–µ–≤–æ–º.</div>

        <button id="actionBtn" class="action-btn" onclick="handleAction()">–ü–æ–≥—Ä–µ—Ç—å—Å—è</button>

        <div id="shop-list">
            <div class="shop-item"><span>üõãÔ∏è –î–∏–≤–∞–Ω (10üßÄ)</span> <button class="buy-btn" onclick="buy('sofa', 10)">–ö—É–ø–∏—Ç—å</button></div>
            <div class="shop-item"><span>üìª –†–∞–¥–∏–æ (50üßÄ)</span> <button class="buy-btn" onclick="buy('radio', 50)">–ö—É–ø–∏—Ç—å</button></div>
            <div class="shop-item"><span>üß∫ –ì–∞–º–∞–∫ (15üßÄ)</span> <button class="buy-btn" onclick="buy('hammock', 15)">–ö—É–ø–∏—Ç—å</button></div>
        </div>
    </div>

    <a href="/rattown/" class="footer-link">‚Üê –ù–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å</a>

    <audio id="fireSound" loop><source src="fire.mp3" type="audio/mpeg"></audio>

    <script>
        let cheeseBalance = 0;
        let inventory = { sofa: false, radio: false, hammock: false };
        let currentRoom = 'living';

        const rooms = {
            living: { name: "–î—è–¥—é—à–∫–∞ –ü–∏—Å–∫", icon: "üî•", rat: "üêÄ", desc: "–ó–¥–µ—Å—å —Ç–µ–ø–ª–æ –∏ –ø–∞—Ö–Ω–µ—Ç –¥–µ—Ä–µ–≤–æ–º.", btn: "–ü–æ–≥—Ä–µ—Ç—å—Å—è" },
            kitchen: { name: "–®–µ—Ñ –†–µ–º–∏", icon: "üç≥", rat: "üêÄ", desc: "–ü–∞—Ö–Ω–µ—Ç —Å–≤–µ–∂–∏–º —Å—ã—Ä–æ–º –∏ —Å–ø–µ—Ü–∏—è–º–∏.", btn: "–í–∑—è—Ç—å –∫—É—Å–æ—á–µ–∫" },
            bedroom: { name: "–ú–∞–ª—ã—à –°–æ–Ω—è", icon: "üí§", rat: "üêÄ", desc: "–¢–∏—Ö–æ... –ö—Ä—ã—Å—ã –≤–∏–¥—è—Ç —Å–Ω—ã.", btn: "–£–∫—Ä—ã—Ç—å" },
            basement: { name: "–í–∏–Ω—Ç–∏–∫", icon: "üì¶", rat: "üêÄ", desc: "–°–∫–ª–∞–¥ –∑–∞–±—ã—Ç—ã—Ö –≤–µ—â–µ–π –∏ —à–µ—Å—Ç–µ—Ä—ë–Ω–æ–∫.", btn: "–ü–æ–º–æ—á—å" },
            shop: { name: "–¢–æ—Ä–≥–æ–≤–µ—Ü –•–≤–æ—Å—Ç", icon: "üêπ", rat: "", desc: "–£ –º–µ–Ω—è –µ—Å—Ç—å –≤—Å—ë –¥–ª—è —É—é—Ç–∞!", btn: "" }
        };

        function changeRoom(id) {
            currentRoom = id;
            const r = rooms[id];
            const fire = document.getElementById('fireSound');
            
            document.getElementById('rat-name').innerText = r.name;
            document.getElementById('roomIcon').innerText = r.icon;
            document.getElementById('ratIcon').innerText = r.rat;
            document.getElementById('roomDesc').innerText = r.desc;
            document.getElementById('actionBtn').innerText = r.btn;

            // –°–ø–µ—Ü-—ç—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤
            if (id === 'living' && inventory.sofa) {
                document.getElementById('roomIcon').innerHTML = "üî• <span style='margin-left:10px;'>üõãÔ∏è</span>";
                document.getElementById('roomDesc').innerText = "–î—è–¥—é—à–∫–∞ –ü–∏—Å–∫ –¥–æ–≤–æ–ª—å–Ω–æ —Å–∏–¥–∏—Ç –Ω–∞ –¥–∏–≤–∞–Ω–µ.";
            }
            if (id === 'bedroom' && inventory.hammock) {
                document.getElementById('roomIcon').innerText = "üß∫";
            }
            if (id === 'basement' && inventory.radio) {
                document.getElementById('roomIcon').innerHTML = "üì¶ <span style='margin-left:10px;'>üìª</span>";
            }

            // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤—É–∫–æ–º –∏ –º–∞–≥–∞–∑–∏–Ω–æ–º
            if (id === 'living') fire.play().catch(()=>{}); else fire.pause();
            
            document.getElementById('shop-list').style.display = (id === 'shop') ? 'block' : 'none';
            document.getElementById('actionBtn').style.display = (id === 'shop') ? 'none' : 'block';
        }

        function handleAction() {
            if (currentRoom === 'kitchen') {
                cheeseBalance++;
                updateDisplay();
                alert("–†–µ–º–∏ —É–≥–æ—Å—Ç–∏–ª —Ç–µ–±—è —Å—ã—Ä–æ–º!");
            } else {
                alert(rooms[currentRoom].name + " –±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç —Ç–µ–±—è.");
            }
        }

        function buy(item, price) {
            if (inventory[item]) { alert("–£–∂–µ –∫—É–ø–ª–µ–Ω–æ!"); return; }
            if (cheeseBalance >= price) {
                cheeseBalance -= price;
                inventory[item] = true;
                updateDisplay();
                alert("–£—Ä–∞! –ù–æ—Ä–∞ —Å—Ç–∞–ª–∞ —É—é—Ç–Ω–µ–µ.");
                changeRoom('living');
            } else {
                alert("–ú–∞–ª–æ —Å—ã—Ä–∞! –ù—É–∂–Ω–æ " + price);
            }
        }

        function updateDisplay() {
            document.getElementById('balance').innerText = cheeseBalance;
            localStorage.setItem('ratCheese', cheeseBalance);
            localStorage.setItem('ratInv', JSON.stringify(inventory));
        }

        window.onload = () => {
            if (localStorage.getItem('ratCheese')) cheeseBalance = parseInt(localStorage.getItem('ratCheese'));
            if (localStorage.getItem('ratInv')) inventory = JSON.parse(localStorage.getItem('ratInv'));
            updateDisplay();
            changeRoom('living');
        };
    </script>
</body>
</html>
