<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£—é—Ç–Ω–∞—è –Ω–æ—Ä–∞</title>
    <style>
    :root {
        --brown-dark: #3d2b1f;
        --brown-light: #5d4037;
        --gold: #ffcc00;
    }

    body {
        background-color: #1a120b;
        color: white;
        font-family: 'Arial', sans-serif;
        display: flex;
        justify-content: center;
        padding-top: 20px;
    }

    .container {
        width: 350px;
        text-align: center;
    }

    /* –í–µ—Ä—Ö–Ω–µ–µ –º–µ–Ω—é - –∫—Ä—É–≥–ª—ã–µ –∫–Ω–æ–ø–∫–∏ */
    .nav-menu {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
        margin-bottom: 20px;
    }

    .nav-btn {
        width: 60px;
        height: 60px;
        border-radius: 50%; /* –î–µ–ª–∞–µ–º –∫—Ä—É–≥–ª—ã–º–∏ */
        border: 2px solid var(--brown-light);
        background: var(--brown-dark);
        color: white;
        font-size: 0.7rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: 0.3s;
    }

    .nav-btn:hover {
        border-color: var(--gold);
        transform: scale(1.1);
    }

    /* –û–±–ª–∞–∫–æ –æ–ø–∏—Å–∞–Ω–∏—è */
    .description-cloud {
        background: white;
        color: #333;
        padding: 15px;
        border-radius: 20px;
        position: relative;
        margin: 20px 0;
        font-size: 0.9rem;
        box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }

    /* –•–≤–æ—Å—Ç–∏–∫ –æ–±–ª–∞–∫–∞ */
    .description-cloud::after {
        content: '';
        position: absolute;
        top: -10px;
        left: 50%;
        transform: translateX(-50%);
        border-left: 10px solid transparent;
        border-right: 10px solid transparent;
        border-bottom: 10px solid white;
    }

    /* –û—Å–Ω–æ–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */
    .btn {
        background: var(--brown-light);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 20px;
        cursor: pointer;
        margin: 5px;
        transition: 0.2s;
    }

    .btn:hover {
        background: #795548;
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞ */
    .upgrade-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: rgba(0,0,0,0.2);
        padding: 8px 12px;
        margin: 5px 0;
        border-radius: 10px;
    }
    </style>
</head>
<body>

<div class="container">
    <div class="nav-menu">
        <button class="nav-btn" onclick="changeRoom('living')">üè†<br>–£—é—Ç</button>
        <button class="nav-btn" onclick="changeRoom('kitchen')">üç≥<br>–ï–¥–∞</button>
        <button class="nav-btn" onclick="changeRoom('bedroom')">üí§<br>–°–æ–Ω</button>
        <button class="nav-btn" onclick="changeRoom('basement')">üì¶<br>–°–∫–ª–∞–¥</button>
        <button class="nav-btn" onclick="changeRoom('shop')" style="border-color: #ffcc00;">üí∞<br>–õ–∞–≤–∫–∞</button>
        <button class="nav-btn" onclick="window.location.href='/ratmetro/'" style="background: #000; color: #ffcc00;">üöá<br>–ú–µ—Ç—Ä–æ</button>
    </div>

    <div class="main-card">
        <h2 id="rat-name" style="margin-top: 0; color: #ffcc00; font-size: 1.2rem;">–î—è–¥—é—à–∫–∞ –ü–∏—Å–∫</h2>
        
        <div id="room-display" class="room-window">
            <div id="roomIcon" style="font-size: 60px;">üî•</div>
            <div id="ratIcon" class="rat-character">üêÄ</div>
        </div>

        <div class="cloud-inner">
            <p id="roomDesc" style="margin: 0; font-weight: bold;">–ì—Ä–µ–µ—Ç –ª–∞–ø–∫–∏ —É –æ–≥–Ω—è.</p>
        </div>

        <button id="actionBtn" class="action-btn-main" onclick="handleAction()">–ü–æ—Å–ª—É—à–∞—Ç—å —Å–æ–≤–µ—Ç</button>

        <div id="shop-items" style="display: none; margin-top: 15px;">
            <div class="upgrade-item"><span>üõãÔ∏è –î–∏–≤–∞–Ω (10üßÄ)</span><button class="buy-small" onclick="buy('sofa', 10)">–ö—É–ø–∏—Ç—å</button></div>
            <div class="upgrade-item"><span>üë®‚Äçüç≥ –ö–æ–ª–ø–∞–∫ (20üßÄ)</span><button class="buy-small" onclick="buy('hat', 20)">–ö—É–ø–∏—Ç—å</button></div>
            <div class="upgrade-item"><span>‚òÅÔ∏è –ü–æ–¥—É—à–∫–∞ (30üßÄ)</span><button class="buy-small" onclick="buy('pillow', 30)">–ö—É–ø–∏—Ç—å</button></div>
            <div class="upgrade-item"><span>üïØÔ∏è –°–≤–µ—á–∏ (5üßÄ)</span><button class="buy-small" onclick="buy('candles', 5)">–ö—É–ø–∏—Ç—å</button></div>
            <div class="upgrade-item"><span>üß∫ –ì–∞–º–∞–∫ (15üßÄ)</span><button class="buy-small" onclick="buy('hammock', 15)">–ö—É–ø–∏—Ç—å</button></div>
            <div class="upgrade-item"><span>üìª –†–∞–¥–∏–æ (50üßÄ)</span><button class="buy-small" onclick="buy('radio', 50)">–ö—É–ø–∏—Ç—å</button></div>
        </div>
    </div>

    <div style="margin-top: 15px; font-size: 1.1rem;">üßÄ –°—ã—Ä –≤ –∑–∞–∫—Ä–æ–º–∞—Ö: <span id="balance">0</span></div>
</div>

<style>
    /* –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ */
    body { background: #1a120b; color: white; font-family: sans-serif; display: flex; justify-content: center; }
    .container { width: 340px; text-align: center; padding-top: 10px; }

    /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
    .nav-menu { display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; margin-bottom: 15px; }
    .nav-btn { width: 55px; height: 55px; border-radius: 50%; border: 2px solid #5d4037; background: #3d2b1f; color: white; font-size: 0.65rem; cursor: pointer; transition: 0.2s; }
    .nav-btn:hover { border-color: #ffcc00; transform: scale(1.05); }

    /* –ï–¥–∏–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –∫–æ–º–Ω–∞—Ç—ã */
    .main-card { 
        background: #3d2b1f; 
        border: 4px solid #5d4037; 
        border-radius: 30px; 
        padding: 20px; 
        box-shadow: 0 10px 25px rgba(0,0,0,0.5);
    }

    /* –û–∫–Ω–æ –∫–æ–º–Ω–∞—Ç—ã */
    .room-window {
        background: #2b1d12;
        height: 120px;
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        border: 2px solid #221a15;
    }

    .rat-character {
        position: absolute;
        bottom: 10px;
        left: 45%;
        font-size: 40px;
        transition: 0.5s ease;
    }

    /* –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ */
    .cloud-inner {
        background: #fdfdfd;
        color: #333;
        margin: 15px 0;
        padding: 12px;
        border-radius: 15px;
        font-size: 0.9rem;
    }

    /* –ë–æ–ª—å—à–∞—è –∫–Ω–æ–ø–∫–∞ –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ */
    .action-btn-main {
        width: 100%;
        padding: 15px;
        border-radius: 15px;
        border: none;
        background: #ffcc00;
        color: #3d2b1f;
        font-weight: bold;
        font-size: 1rem;
        cursor: pointer;
        transition: 0.2s;
    }
    .action-btn-main:hover { background: #e6b800; transform: translateY(-2px); }

    /* –ú–∞–≥–∞–∑–∏–Ω */
    .upgrade-item { display: flex; justify-content: space-between; align-items: center; font-size: 0.8rem; margin: 5px 0; background: rgba(0,0,0,0.2); padding: 5px 10px; border-radius: 8px; }
    .buy-small { background: #5d4037; color: white; border: none; padding: 4px 10px; border-radius: 5px; cursor: pointer; }
</style>

<audio id="fireSound" loop>
    <source src="fire.mp3" type="audio/mpeg">
</audio>
<audio id="eatSound"><source src="eat.mp3" type="audio/mpeg"></audio>

<script>
    let cheeseBalance = 0;
let currentRoom = 'living';
// –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å
let inventory = { 
    sofa: false, hat: false, pillow: false, 
    candles: false, hammock: false, radio: false 
};

const rooms = {
    living: { name: "–î—è–¥—é—à–∫–∞ –ü–∏—Å–∫", icon: "üî•", rat: "üêÄ", desc: "–ì—Ä–µ–µ—Ç –ª–∞–ø–∫–∏ —É –æ–≥–Ω—è.", btn: "–ü–æ—Å–ª—É—à–∞—Ç—å —Å–æ–≤–µ—Ç" },
    kitchen: { name: "–®–µ—Ñ –†–µ–º–∏", icon: "üç≥", rat: "üêÄ", desc: "–ì–æ—Ç–æ–≤–∏—Ç –ª—É—á—à–∏–π —Å—ã—Ä –≤ –æ–∫—Ä—É–≥–µ!", btn: "–í–∑—è—Ç—å —Å—ã—Ä üßÄ" },
    bedroom: { name: "–ú–∞–ª—ã—à –°–æ–Ω—è", icon: "üí§", rat: "üêÄ", desc: "–í–∏–¥–∏—Ç —Å–Ω—ã –æ –≥–∏–≥–∞–Ω—Ç—Å–∫–æ–π –≥–æ–ª–æ–≤–∫–µ —Å—ã—Ä–∞.", btn: "–ü–æ–ø—Ä–∞–≤–∏—Ç—å –æ–¥–µ—è–ª–æ" },
    basement: { name: "–í–∏–Ω—Ç–∏–∫", icon: "üì¶", rat: "üêÄ", desc: "–ú–∞—Å—Ç–µ—Ä–∏—Ç –≤–µ—á–Ω—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å –∏–∑ –ø—Ä–æ–±–∫–∏.", btn: "–ü–æ–º–æ—á—å —Å –¥–µ—Ç–∞–ª—å—é" },
    shop: { name: "–¢–æ—Ä–≥–æ–≤–µ—Ü –•–≤–æ—Å—Ç", icon: "üí∞", rat: "üêπ", desc: "–ú–µ–Ω—è—é —É—é—Ç –Ω–∞ —Å—ã—Ä!", btn: "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–≤–∞—Ä—ã" }
};

// --- –°–ò–°–¢–ï–ú–ê –°–û–•–†–ê–ù–ï–ù–ò–Ø ---
function saveGame() {
    localStorage.setItem('ratCheese', cheeseBalance);
    localStorage.setItem('ratInventory', JSON.stringify(inventory));
}

function loadGame() {
    const savedCheese = localStorage.getItem('ratCheese');
    const savedInv = localStorage.getItem('ratInventory');
    
    if (savedCheese !== null) {
        cheeseBalance = parseInt(savedCheese);
    }
    if (savedInv !== null) {
        inventory = JSON.parse(savedInv);
    }
    
    updateDisplay();
    changeRoom('living');
}

function updateDisplay() {
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ —Å—ã—Ä–∞ –≤–µ–∑–¥–µ
    const balanceElements = document.querySelectorAll('#balance');
    balanceElements.forEach(el => el.innerText = cheeseBalance);
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –≤ –º–∞–≥–∞–∑–∏–Ω–µ
    if (inventory.sofa && document.getElementById('buy-sofa')) document.getElementById('buy-sofa').innerText = "–ö—É–ø–ª–µ–Ω–æ";
    if (inventory.hat && document.getElementById('buy-hat')) document.getElementById('buy-hat').innerText = "–ö—É–ø–ª–µ–Ω–æ";
    if (inventory.pillow && document.getElementById('buy-pillow')) document.getElementById('buy-pillow').innerText = "–ö—É–ø–ª–µ–Ω–æ";
    if (inventory.candles && document.getElementById('buy-candles')) document.getElementById('buy-candles').innerText = "–ö—É–ø–ª–µ–Ω–æ";
    if (inventory.hammock && document.getElementById('buy-hammock')) document.getElementById('buy-hammock').innerText = "–ö—É–ø–ª–µ–Ω–æ";
    if (inventory.radio && document.getElementById('buy-radio')) document.getElementById('buy-radio').innerText = "–ö—É–ø–ª–µ–Ω–æ";
}

// --- –õ–û–ì–ò–ö–ê –ö–û–ú–ù–ê–¢ ---
function changeRoom(id) {
    currentRoom = id;
    const r = rooms[id];
    const roomIcon = document.getElementById('roomIcon');
    const ratIcon = document.getElementById('ratIcon');
    const fire = document.getElementById('fireSound');
    
    document.getElementById('rat-name').innerText = r.name;
    document.getElementById('roomDesc').innerText = r.desc;
    roomIcon.style.filter = "none";

    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∫–æ–Ω–∫—É –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (–≤—Å–µ –∫—Ä—ã—Å—ã üêÄ, —Ç–æ—Ä–≥–æ–≤–µ—Ü —Ö–æ–º—è–∫ üêπ)
    ratIcon.innerText = r.rat;

    if (id === 'living') {
        fire.play().catch(() => {});
        if (inventory.sofa) {
            roomIcon.innerHTML = "üî• <span style='margin-left:15px;'>üõãÔ∏è</span>";
            ratIcon.style.marginLeft = "80px";
        } else {
            roomIcon.innerText = "üî•";
            ratIcon.style.marginLeft = "50px";
        }
        if (inventory.candles) roomIcon.style.filter = "drop-shadow(0 0 15px #ffcc00)";
    } 
    else if (id === 'bedroom') {
        fire.pause();
        roomIcon.innerText = inventory.hammock ? "üß∫" : r.icon;
        if (inventory.pillow) ratIcon.innerText = "‚òÅÔ∏èüêÄ";
    }
    else if (id === 'kitchen') {
        fire.pause();
        roomIcon.innerText = r.icon;
        if (inventory.hat) ratIcon.innerText = "üë®‚Äçüç≥üêÄ";
    }
    else if (id === 'basement') {
        fire.pause();
        roomIcon.innerHTML = inventory.radio ? "üì¶ <span style='margin-left:10px;'>üìª</span>" : r.icon;
    }
    else {
        fire.pause();
        roomIcon.innerText = r.icon;
    }

    document.getElementById('actionBtn').innerText = r.btn;
    document.getElementById('shop-items').style.display = (id === 'shop') ? 'block' : 'none';
    document.getElementById('actionBtn').style.display = (id === 'shop') ? 'none' : 'block';
}

// --- –ú–ê–ì–ê–ó–ò–ù –ò –î–ï–ô–°–¢–í–ò–Ø ---
function buy(item, price) {
    if (inventory[item]) return;
    if (cheeseBalance >= price) {
        cheeseBalance -= price;
        inventory[item] = true;
        saveGame();
        updateDisplay();
        changeRoom('shop'); 
    } else {
        alert("–ú–∞–ª–æ–≤–∞—Ç–æ —Å—ã—Ä–∞! –ù—É–∂–Ω–æ: " + price + " üßÄ");
    }
}

function handleAction() {
    if (currentRoom === 'kitchen') {
        cheeseBalance++; // –ü—Ä—è–º–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ
        saveGame();
        updateDisplay();
        alert("–®–µ—Ñ –†–µ–º–∏ –¥–∞–ª —Ç–µ–±–µ –∫—É—Å–æ—á–µ–∫ —Å—ã—Ä–∞! –¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è: " + cheeseBalance + " üßÄ");
    } else if (currentRoom === 'living') {
        alert("–î—è–¥—é—à–∫–∞ –ü–∏—Å–∫: '–°—ã—Ä ‚Äî —ç—Ç–æ —Ö–æ—Ä–æ—à–æ, –∞ —Ç–µ–ø–ª—ã–π —Å—ã—Ä ‚Äî –µ—â–µ –ª—É—á—à–µ!'");
    } else if (currentRoom === 'basement') {
        alert("–í–∏–Ω—Ç–∏–∫: '–ù–µ –Ω–∞—Å—Ç—É–ø–∏ –Ω–∞ —à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∏!'");
    } else if (currentRoom === 'bedroom') {
        alert("–¢—Å—Å—Å... –ú–∞–ª—ã—à –°–æ–Ω—è —Å–ø–∏—Ç.");
    }
}

window.onload = loadGame;
</script>
</body>
</html>
