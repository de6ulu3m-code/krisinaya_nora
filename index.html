<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£—é—Ç–Ω–∞—è –Ω–æ—Ä–∞</title>
    <style>
        :root { --bg-color: #1a120b; --text-color: #f3e5ab; }
        body {
            background-color: var(--bg-color); color: var(--text-color);
            font-family: 'Segoe UI', serif; display: flex; flex-direction: column;
            justify-content: center; align-items: center; min-height: 100vh; margin: 0; transition: 0.5s;
        }
        .nav-menu { display: flex; gap: 8px; margin-bottom: 20px; flex-wrap: wrap; justify-content: center; }
        .nav-btn {
            background: #4a3728; color: #f3e5ab; border: 1px solid #8b4513;
            padding: 8px 12px; border-radius: 10px; cursor: pointer;
        }
        .nora-container {
            background: radial-gradient(circle, #3d2b1f 0%, #1a120b 100%);
            padding: 30px; text-align: center; border-radius: 40px;
            border: 2px solid #4a3728; box-shadow: 0 0 50px rgba(0,0,0,0.5);
            max-width: 320px; width: 90%; position: relative;
        }
        .rat-name { font-weight: bold; color: #ffcc00; margin-bottom: 5px; font-size: 1.2rem; }
        .room-icon { font-size: 70px; margin: 10px 0; display: block; }
        .rat-resident { font-size: 45px; margin-top: -35px; margin-left: 50px; transition: 0.3s; }
        .btn-action {
            background: #8b4513; color: #fff; border: none;
            padding: 12px 20px; border-radius: 20px; cursor: pointer; margin-top: 15px; width: 100%;
        }
        .upgrade-item {
            background: rgba(255,255,255,0.05); padding: 10px; border-radius: 10px;
            margin-top: 10px; display: flex; justify-content: space-between; align-items: center;
        }
        #stock-display { color: #ffcc00; font-size: 1.2rem; margin-bottom: 10px; }
    </style>
</head>
<body>

<div class="nav-menu">
    <button class="nav-btn" onclick="changeRoom('living')">–ì–æ—Å—Ç–∏–Ω–∞—è</button>
    <button class="nav-btn" onclick="changeRoom('kitchen')">–ö—É—Ö–Ω—è</button>
    <button class="nav-btn" onclick="changeRoom('bedroom')">–°–ø–∞–ª—å–Ω—è</button>
    <button class="nav-btn" onclick="changeRoom('basement')">üì¶ –ü–æ–¥–≤–∞–ª</button>
    <button class="nav-btn" onclick="changeRoom('shop')">üí∞ –õ–∞–≤–∫–∞</button>
    <button class="nav-btn" onclick="window.location.href='/ratmetro/'" style="border-color: #ffcc00;">üöá –ú–µ—Ç—Ä–æ</button>
</div>

<div class="nora-container" id="roomContainer">
    <div id="stock-display">–°—ã—Ä: <span id="cheese-count">0</span> üßÄ</div>
    <div id="rat-name" class="rat-name">–î—è–¥—é—à–∫–∞ –ü–∏—Å–∫</div>
    
    <div class="room-icon" id="roomIcon">üî•</div>
    <div class="rat-resident" id="ratIcon">üêÄ</div>

    <p id="roomDesc">–ó–¥–µ—Å—å —Ç–µ–ø–ª–æ –∏ –ø–∞—Ö–Ω–µ—Ç –¥–µ—Ä–µ–≤–æ–º.</p>
    
    <div id="shop-items" style="display: none; text-align: left;">
    <div class="upgrade-item"><span>üõãÔ∏è –î–∏–≤–∞–Ω (10üßÄ)</span><button id="buy-sofa" onclick="buy('sofa', 10)">–ö—É–ø–∏—Ç—å</button></div>
    <div class="upgrade-item"><span>üë®‚Äçüç≥ –ö–æ–ª–ø–∞–∫ (20üßÄ)</span><button id="buy-hat" onclick="buy('hat', 20)">–ö—É–ø–∏—Ç—å</button></div>
    <div class="upgrade-item"><span>‚òÅÔ∏è –ü–æ–¥—É—à–∫–∞ (30üßÄ)</span><button id="buy-pillow" onclick="buy('pillow', 30)">–ö—É–ø–∏—Ç—å</button></div>
    <div class="upgrade-item"><span>üïØÔ∏è –°–≤–µ—á–∏ (5üßÄ)</span><button id="buy-candles" onclick="buy('candles', 5)">–ö—É–ø–∏—Ç—å</button></div>
    <div class="upgrade-item"><span>üß∫ –ì–∞–º–∞–∫ (15üßÄ)</span><button id="buy-hammock" onclick="buy('hammock', 15)">–ö—É–ø–∏—Ç—å</button></div>
    <div class="upgrade-item"><span>üìª –†–∞–¥–∏–æ (50üßÄ)</span><button id="buy-radio" onclick="buy('radio', 50)">–ö—É–ø–∏—Ç—å</button></div>
    </div>
    
<a href="https://de6ulu3m-code.github.io/ratpage/" style="margin-top: 20px; color: #8b4513; text-decoration: none;">‚Üê –ù–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å</a>

<audio id="fireSound" loop><source src="fire.mp3" type="audio/mpeg"></audio>
<audio id="eatSound"><source src="eat.mp3" type="audio/mpeg"></audio>

<script>
    let cheeseBalance = 0;
let currentRoom = 'living';
// –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
let inventory = { 
    sofa: false, hat: false, pillow: false, 
    candles: false, hammock: false, radio: false 
};

const rooms = {
    living: { name: "–î—è–¥—é—à–∫–∞ –ü–∏—Å–∫", icon: "üî•", rat: "üêÄ", desc: "–ì—Ä–µ–µ—Ç –ª–∞–ø–∫–∏ —É –æ–≥–Ω—è.", btn: "–ü–æ—Å–ª—É—à–∞—Ç—å —Å–æ–≤–µ—Ç" },
    kitchen: { name: "–®–µ—Ñ –†–µ–º–∏", icon: "üç≥", rat: "üêÅ", desc: "–ì–æ—Ç–æ–≤–∏—Ç –ª—É—á—à–∏–π —Å—ã—Ä –≤ –æ–∫—Ä—É–≥–µ!", btn: "–í–∑—è—Ç—å —Å—ã—Ä üßÄ" },
    bedroom: { name: "–ú–∞–ª—ã—à –°–æ–Ω—è", icon: "üí§", rat: "üí§üêÄ", desc: "–í–∏–¥–∏—Ç —Å–Ω—ã –æ –≥–∏–≥–∞–Ω—Ç—Å–∫–æ–π –≥–æ–ª–æ–≤–∫–µ —Å—ã—Ä–∞.", btn: "–ü–æ–ø—Ä–∞–≤–∏—Ç—å –æ–¥–µ—è–ª–æ" },
    basement: { name: "–í–∏–Ω—Ç–∏–∫", icon: "üì¶", rat: "‚öôÔ∏èüêÅ", desc: "–ú–∞—Å—Ç–µ—Ä–∏—Ç –≤–µ—á–Ω—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å –∏–∑ –ø—Ä–æ–±–∫–∏.", btn: "–ü–æ–º–æ—á—å —Å –¥–µ—Ç–∞–ª—å—é" },
    shop: { name: "–¢–æ—Ä–≥–æ–≤–µ—Ü –•–≤–æ—Å—Ç", icon: "üí∞", rat: "üêπ", desc: "–ú–µ–Ω—è—é —É—é—Ç –Ω–∞ —Å—ã—Ä!", btn: "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–≤–∞—Ä—ã" }
};

// --- –°–ò–°–¢–ï–ú–ê –°–û–•–†–ê–ù–ï–ù–ò–Ø ---
function saveGame() {
    localStorage.setItem('ratCheese', cheeseBalance);
    localStorage.setItem('ratInventory', JSON.stringify(inventory));
}

function loadGame() {
    const savedCheese = localStorage.getItem('ratCheese');
    const savedInv = localStorage.getItem('ratInventory');
    
    if (savedCheese !== null) cheeseBalance = parseInt(savedCheese);
    if (savedInv !== null) inventory = JSON.parse(savedInv);
    
    updateDisplay();
    changeRoom('living'); // –ù–∞—á–∏–Ω–∞–µ–º –≤ –≥–æ—Å—Ç–∏–Ω–æ–π
}

function updateDisplay() {
    const balanceEl = document.getElementById('balance');
    if (balanceEl) balanceEl.innerText = cheeseBalance;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö –≤ –º–∞–≥–∞–∑–∏–Ω–µ
    if (inventory.sofa) document.getElementById('buy-sofa').innerText = "–ö—É–ø–ª–µ–Ω–æ";
    if (inventory.hat) document.getElementById('buy-hat').innerText = "–ö—É–ø–ª–µ–Ω–æ";
    if (inventory.pillow) document.getElementById('buy-pillow').innerText = "–ö—É–ø–ª–µ–Ω–æ";
    if (inventory.candles) document.getElementById('buy-candles').innerText = "–ö—É–ø–ª–µ–Ω–æ";
    if (inventory.hammock) document.getElementById('buy-hammock').innerText = "–ö—É–ø–ª–µ–Ω–æ";
    if (inventory.radio) document.getElementById('buy-radio').innerText = "–ö—É–ø–ª–µ–Ω–æ";
}

// --- –õ–û–ì–ò–ö–ê –ö–û–ú–ù–ê–¢ ---
function changeRoom(id) {
    currentRoom = id;
    const r = rooms[id];
    const roomIcon = document.getElementById('roomIcon');
    const ratIcon = document.getElementById('ratIcon');
    const fire = document.getElementById('fireSound');
    
    document.getElementById('rat-name').innerText = r.name;
    document.getElementById('roomDesc').innerText = r.desc;
    roomIcon.style.filter = "none"; // –°–±—Ä–æ—Å —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

    if (id === 'living') {
        fire.play().catch(() => {});
        if (inventory.sofa) {
            roomIcon.innerHTML = "üî• <span style='margin-left:15px;'>üõãÔ∏è</span>";
            ratIcon.style.marginLeft = "80px";
            document.getElementById('roomDesc').innerText = "–î—è–¥—é—à–∫–∞ –ü–∏—Å–∫ –æ—Ç–¥—ã—Ö–∞–µ—Ç –Ω–∞ –¥–∏–≤–∞–Ω–µ —É –æ–≥–Ω—è.";
        } else {
            roomIcon.innerText = "üî•";
            ratIcon.style.marginLeft = "50px";
        }
        if (inventory.candles) {
            roomIcon.style.filter = "drop-shadow(0 0 15px #ffcc00)";
        }
    } 
    else if (id === 'bedroom') {
        fire.pause();
        if (inventory.hammock) {
            roomIcon.innerText = "üß∫";
            document.getElementById('roomDesc').innerText = "–ú–∞–ª—ã—à –°–æ–Ω—è —Å–ª–∞–¥–∫–æ —Å–ø–∏—Ç –≤ –≥–∞–º–∞–∫–µ.";
        } else {
            roomIcon.innerText = r.icon;
        }
        if (inventory.pillow) ratIcon.innerText = "‚òÅÔ∏èüêÄ";
    }
    else if (id === 'kitchen') {
        fire.pause();
        roomIcon.innerText = r.icon;
        if (inventory.hat) ratIcon.innerText = "üë®‚Äçüç≥üêÅ";
    }
    else if (id === 'basement') {
        fire.pause();
        // –ï—Å–ª–∏ –∫—É–ø–ª–µ–Ω–æ —Ä–∞–¥–∏–æ, –æ–Ω–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –ø–æ–¥–≤–∞–ª–µ
        roomIcon.innerHTML = inventory.radio ? "üì¶ <span style='margin-left:10px;'>üìª</span>" : r.icon;
    }
    else {
        fire.pause();
        roomIcon.innerText = r.icon;
        ratIcon.innerText = r.rat;
    }

    document.getElementById('actionBtn').innerText = r.btn;
    document.getElementById('shop-items').style.display = (id === 'shop') ? 'block' : 'none';
    document.getElementById('actionBtn').style.display = (id === 'shop') ? 'none' : 'block';
}

// --- –ú–ê–ì–ê–ó–ò–ù –ò –î–ï–ô–°–¢–í–ò–Ø ---
function buy(item, price) {
    if (inventory[item]) {
        alert("–≠—Ç–æ —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å!");
        return;
    }
    if (cheeseBalance >= price) {
        cheeseBalance -= price;
        inventory[item] = true;
        saveGame();
        updateDisplay();
        alert("–£—Ä–∞! –û–±–Ω–æ–≤–∫–∞ –¥–ª—è –Ω–æ—Ä—ã –∫—É–ø–ª–µ–Ω–∞.");
    } else {
        alert("–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç —Å—ã—Ä–∞! –°–≥–æ–Ω—è–π –≤ –≥–æ—Ä–æ–¥ –Ω–∞ —Ä—ã–Ω–æ–∫.");
    }
}

function handleAction() {
    if (currentRoom === 'kitchen') {
        alert("–®–µ—Ñ –†–µ–º–∏: '–£–≥–æ—â–∞–π—Å—è, —ç—Ç–æ —Å–≤–µ–∂–∏–π –ø–∞—Ä–º–µ–∑–∞–Ω!' (+1 —Å—ã—Ä)");
        cheeseBalance++;
        saveGame();
        updateDisplay();
    } else if (currentRoom === 'living') {
        alert("–î—è–¥—é—à–∫–∞ –ü–∏—Å–∫: '–ì–ª–∞–≤–Ω–æ–µ –≤ –∂–∏–∑–Ω–∏ ‚Äî —ç—Ç–æ —Ç–µ–ø–ª—ã–µ –ª–∞–ø–∫–∏ –∏ –ø–æ–ª–Ω—ã–µ –∑–∞–∫—Ä–æ–º–∞'.");
    } else if (currentRoom === 'basement') {
        alert("–í–∏–Ω—Ç–∏–∫: '–ù–µ –º–µ—à–∞–π, —è –ø—ã—Ç–∞—é—Å—å –¥–æ–±—ã—Ç—å –∏—Å–∫—Ä—É –∏–∑ —ç—Ç–æ–π –±–∞—Ç–∞—Ä–µ–π–∫–∏!'");
    } else {
        alert("–ö—Ä—ã—Å–∞ –¥–æ–≤–æ–ª—å–Ω–æ –ø–æ–ø–∏—Å–∫–∏–≤–∞–µ—Ç.");
    }
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
window.onload = loadGame;
</script>
</body>
</html>
